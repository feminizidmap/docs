<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Briefkasten - Tech.Feminizidmap.org</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://tech.feminizidmap.org/favicon.png><link rel=stylesheet href=/css/style.min.36d902c41c47372f9159a717037f0fbdfaf24d6fb765c700bad974b0a33da14a.css></head><body class="page page-default-single"><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-about><a href=/about/><span>About</span></a></li><li class=menu-item-docs><a href=/docs/><span>Docs</span></a></li><li class=menu-item-blog><a href=/blog/><span>Blog</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div class=logo><a href=https://tech.feminizidmap.org><img alt=Logo src=/assets/tech-logo.png></a></div><div class=logo-mobile><a href=https://tech.feminizidmap.org><img alt=Logo src=/assets/tech-logo.png></a></div><div id=main-menu class=main-menu><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-about><a href=/about/><span>About</span></a></li><li class=menu-item-docs><a href=/docs/><span>Docs</span></a></li><li class=menu-item-blog><a href=/blog/><span>Blog</span></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pt-md-6 pb-3 pb-md-6"><div class=row><div class="col-12 col-md-3 mb-3"><div class=sidebar><div class=docs-menu><h4>Docs</h4><ul><li><a href=https://tech.feminizidmap.org/docs/mapper/>Mapper</a></li><li><a href=https://tech.feminizidmap.org/docs/mapper/development/>Mapper development</a></li><li><a href=https://tech.feminizidmap.org/docs/mapper/deployment/>Mapper deployment</a></li><li><a href=https://tech.feminizidmap.org/docs/mapper/backend/>Mapper backend</a></li><li><a href=https://tech.feminizidmap.org/docs/mapper/frontend/>Mapper frontend</a></li><li class=active><a href=https://tech.feminizidmap.org/docs/briefkasten/>Briefkasten</a></li></ul></div></div></div><div class="col-12 col-md-9"><h1 class=title>Briefkasten</h1><div class="content anchor-link-enabled"><p>ðŸ“® Briefkasten is a standalone app used for case reporting. It renders a form from configuration and forwards submitted content to the desired email address.</p><h2 id=overview>Overview</h2><ul><li><a href=/docs/briefkasten#development>Development</a></li><li><a href=/docs/briefkasten#deployment>Deployment</a></li></ul><h2 id=development-setup>Development setup</h2><p>Briefkasten is a small Ruby app using the <a href=http://sinatrarb.com/>Sinatra</a> web framework.</p><p>Using Ruby 3.0.1 (install it eg via <a href=https://github.com/rbenv/rbenv>rbenv</a>)</p><p>There are some libs you need on your system, for Debian-based systems that would be</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ sudo apt install libsqlite3-dev sendmail
</code></pre></div><p>Then install Ruby dependencies.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ bundle install
</code></pre></div><p>Copy the the <code>env.sample</code> file over and adjust the values</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ cp env.sample .env
</code></pre></div><p>source it <code>$ source .env</code></p><p>Time to start up the app!</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ bundle <span class=nb>exec</span> thin start
</code></pre></div><p>You should see the app at <code>localhost:3000</code>.</p><h3 id=use-mailcatcher-and-smtp>Use mailcatcher and SMTP</h3><p>The default method of sending mail is <code>sendmail</code>.</p><p>But you can use <code>mailcatcher</code> to send emails and debug them in a browser-based email client, too, the gem is already added.</p><p>Start <code>mailcatcher</code> in a different terminal window with <code>$ bundle exec mailcatcher</code> and comment out this line in <code>app.rb</code></p><p><code>mail.delivery_method :sendmail</code></p><p>in favor of this line</p><p><code>mail.delivery_method :smtp, address: "localhost", port: 1025</code></p><p>and restart thin.</p><h2 id=deployment>Deployment</h2></div></div></div></div></div></div><div class=sub-footer><div class=container><div class=row><div class="col-12 col-md-6"><ul><li><a href=https://tech.feminizidmap.orgblog/index.xml title="RSS Feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-rss-fill" viewBox="0 0 16 16"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2zm0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2zm.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3z"/></svg><span>subscribe</span></a></li><li><a href=https://github.com/feminizidmap rel="noopener noreferrer nofollow">github.com/feminizidmap</a></li><li><a href=https://feminizidmap.org rel="noopener noreferrer nofollow">feminizidmap.org</a></li></ul></div><div class="col-12 col-md-6"><a href=https://www.bmbf.de/ rel="noopener noreferrer nofollow" target=_blank><img src=/assets/bmbf-logo.svg alt=BMBF></a>
<a href=https://prototypefund.de/ target=_blank rel="noopener noreferrer nofollow"><img src=/assets/logo-prototype.svg alt="Prototype Fund"></a></div></div></div></div><script type=text/javascript src=/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js></script></body></html>